<!doctype html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="content-language" content="en-US">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <title>James Krayer | A quick study on form rendering</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style/style.css">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
    <link rel="canonical" href="https://jameskrayer.com/blog/quick-study-react-froms/" />
  </head>
  <body>

    <header class="site-header">
  <h1 class="site-title"><a class="site-link" href="/">James Krayer</a></h1>
  <nav class="site-nav">
    <a class="site-link" href="/">Home</a>
    <a class="site-link" href="/blog/">Blog</a>
  </nav>
</header>


    <article class="post">
      <header class="post-header">
        <h1 class="title-1">A quick study on form rendering</h1>
        <time class="post-time" datetime="2021-03-04">Mar 04, 2021</time>
      </header>
      <div class="post-content">
        <p>Recently I joined a React team and inherited a complex project in its infancy. While debugging a bit of code I noticed changes to any given form field caused re-renders across the whole page. I suspected it had something to do with the level at which the form data was being saved and how it was being stored. Which is to say that it was being saved as an object in a <code>useState</code> hook at the page level and being passed down through one or more levels of components.</p>
<p>That would mean that any update to any form field would call <code>setState</code> on the form data object like <code>setState({...oldFormData, name: 'Ji' })</code> causing all of the dependencies to re-render on each update. This isn't something I'm questioning since I could see console logs rolling in and see lag when typing. I record it here mostly as a reminder of the issue to my future self.</p>
<p>Rather than tearing down a whole section of the app I decided to do a quick iterative study on forms in React to cement my basic knowledge, see where I might make impactful changes and play with hooks I haven't yet had the opportunity to use.</p>
<h2>1. Uncontrolled</h2>
<p>Not recommended by React but the simplest way to get started with a form field. Beautifully no re-renders on data change. Sadly no practical way (this iteration) to get the field's value.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> fruit <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Apple"</span><span class="token punctuation">,</span> <span class="token string">"Orange"</span><span class="token punctuation">,</span> <span class="token string">"Banana"</span><span class="token punctuation">,</span> <span class="token string">"Pear"</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>label<span class="token operator">></span><br>      Fruit<span class="token operator">:</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><br>      <span class="token operator">&lt;</span>select<span class="token operator">></span><br>        <span class="token punctuation">{</span>fruit<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>          <span class="token operator">&lt;</span>option key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span> value<span class="token operator">=</span><span class="token punctuation">{</span>f<span class="token punctuation">}</span><span class="token operator">></span><br>            <span class="token punctuation">{</span>f<span class="token punctuation">}</span><br>          <span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span><br>        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"app"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2>2 Add props</h2>
<p>Just the next step in the evolution toward re-usable components. Nothing important to see here.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> label<span class="token punctuation">,</span> options <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>  <span class="token operator">&lt;</span>label<span class="token operator">></span><br>    <span class="token punctuation">{</span>label<span class="token punctuation">}</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><br>    <span class="token operator">&lt;</span>select<span class="token operator">></span><br>      <span class="token punctuation">{</span>options<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>        <span class="token operator">&lt;</span>option key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span> value<span class="token operator">=</span><span class="token punctuation">{</span>f<span class="token punctuation">}</span><span class="token operator">></span><br>          <span class="token punctuation">{</span>f<span class="token punctuation">}</span><br>        <span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span><br>      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><br>  <span class="token operator">&lt;</span>App label<span class="token operator">=</span><span class="token string">"Fruit"</span> options<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">"Apple"</span><span class="token punctuation">,</span> <span class="token string">"Orange"</span><span class="token punctuation">,</span> <span class="token string">"Banana"</span><span class="token punctuation">,</span> <span class="token string">"Pear"</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span><br>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"app"</span><span class="token punctuation">)</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2>3. Controlled</h2>
<p>The recommended solution to form fields in React, controlled component. There is one re-render for every change but it's a tiny light weight component so no worries.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> label<span class="token punctuation">,</span> options <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">[</span>selected<span class="token punctuation">,</span> setSelected<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>options<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>label<span class="token operator">></span><br>      <span class="token punctuation">{</span>label<span class="token punctuation">}</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><br>      <span class="token operator">&lt;</span>select<br>        value<span class="token operator">=</span><span class="token punctuation">{</span>selected<span class="token punctuation">}</span><br>        onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setSelected</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span><br>      <span class="token operator">></span><br>        <span class="token punctuation">{</span>options<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>          <span class="token operator">&lt;</span>option key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span> value<span class="token operator">=</span><span class="token punctuation">{</span>f<span class="token punctuation">}</span><span class="token operator">></span><br>            <span class="token punctuation">{</span>f<span class="token punctuation">}</span><br>          <span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span><br>        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><br>  <span class="token operator">&lt;</span>App label<span class="token operator">=</span><span class="token string">"Fruit"</span> options<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">"Apple"</span><span class="token punctuation">,</span> <span class="token string">"Orange"</span><span class="token punctuation">,</span> <span class="token string">"Banana"</span><span class="token punctuation">,</span> <span class="token string">"Pear"</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span><br>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"app"</span><span class="token punctuation">)</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2>4. Controlled</h2>
<p>A more practical example of a re-usable component that more closely resembles my situation. As expected calling <code>setSelected</code> from the child component updates the state in the parent causing both to re-render.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">Select</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> label<span class="token punctuation">,</span> options<span class="token punctuation">,</span> value<span class="token punctuation">,</span> setValue <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>  <span class="token operator">&lt;</span>label<span class="token operator">></span><br>    <span class="token punctuation">{</span>label<span class="token punctuation">}</span><br>    <span class="token operator">&lt;</span>select value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setValue</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span><br>      <span class="token punctuation">{</span>options<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>        <span class="token operator">&lt;</span>option key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span> value<span class="token operator">=</span><span class="token punctuation">{</span>f<span class="token punctuation">}</span><span class="token operator">></span><br>          <span class="token punctuation">{</span>f<span class="token punctuation">}</span><br>        <span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span><br>      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><br><span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">[</span>selected<span class="token punctuation">,</span> setSelected<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">"Pear"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>form<br>      onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"form"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">}</span><br>    <span class="token operator">></span><br>      <span class="token operator">&lt;</span>Select<br>        label<span class="token operator">=</span><span class="token string">"Fruit"</span><br>        options<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">"Apple"</span><span class="token punctuation">,</span> <span class="token string">"Orange"</span><span class="token punctuation">,</span> <span class="token string">"Banana"</span><span class="token punctuation">,</span> <span class="token string">"Pear"</span><span class="token punctuation">]</span><span class="token punctuation">}</span><br>        value<span class="token operator">=</span><span class="token punctuation">{</span>selected<span class="token punctuation">}</span><br>        setValue<span class="token operator">=</span><span class="token punctuation">{</span>setSelected<span class="token punctuation">}</span><br>      <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">"submit"</span><span class="token operator">></span>Submit<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"app"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2>5. Context</h2>
<p>No difference here and none honestly epected. I knew ahead of time that context would have the same communication pattern as the prior example but I also wanted to rule it out.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> FormContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token function-variable function">Select</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> label<span class="token punctuation">,</span> options<span class="token punctuation">,</span> value<span class="token punctuation">,</span> setValue <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"render-Select"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>FormContext<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>label<span class="token operator">></span><br>      <span class="token punctuation">{</span>label<span class="token punctuation">}</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><br>      <span class="token operator">&lt;</span>select<br>        value<span class="token operator">=</span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>value<span class="token punctuation">}</span><br>        onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> form<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span><br>      <span class="token operator">></span><br>        <span class="token punctuation">{</span>options<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>          <span class="token operator">&lt;</span>option key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span> value<span class="token operator">=</span><span class="token punctuation">{</span>f<span class="token punctuation">}</span><span class="token operator">></span><br>            <span class="token punctuation">{</span>f<span class="token punctuation">}</span><br>          <span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span><br>        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">[</span>selected<span class="token punctuation">,</span> setSelected<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">"Pear"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"App"</span><span class="token punctuation">,</span> selected<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>FormContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token punctuation">{</span>value<span class="token operator">:</span> selected<span class="token punctuation">,</span> setValue<span class="token operator">:</span> setSelected<span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>form<br>        onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>          e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"form"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">}</span><br>      <span class="token operator">></span><br>        <span class="token operator">&lt;</span>Select label<span class="token operator">=</span><span class="token string">"Fruit"</span> options<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">"Apple"</span><span class="token punctuation">,</span> <span class="token string">"Orange"</span><span class="token punctuation">,</span> <span class="token string">"Banana"</span><span class="token punctuation">,</span> <span class="token string">"Pear"</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><br>        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">"submit"</span><span class="token operator">></span>Submit<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>FormContext<span class="token punctuation">.</span>Provider<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"app"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></code></pre>
<h2>6. forwardRef</h2>
<p>One render. Simple and easy but of course creating a ref for every form field and writing a function to collect them all for every form would be a bit verbose. I also experimented with <code>e.target.children</code> but trying to get out of React from React did not feel right. So it wasn't an avenue I wanted to pursie deeply at this time.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> Select <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">forwardRef</span><span class="token punctuation">(</span><br>  <span class="token punctuation">(</span><span class="token punctuation">{</span> label<span class="token punctuation">,</span> options<span class="token punctuation">,</span> initialValue <span class="token operator">=</span> <span class="token string">""</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> ref<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> <span class="token punctuation">[</span>selected<span class="token punctuation">,</span> setSelected<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>      <span class="token operator">&lt;</span>label<span class="token operator">></span><br>        <span class="token punctuation">{</span>label<span class="token punctuation">}</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><br>        <span class="token operator">&lt;</span>select<br>          ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span><br>          value<span class="token operator">=</span><span class="token punctuation">{</span>selected<span class="token punctuation">}</span><br>          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setSelected</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span><br>        <span class="token operator">></span><br>          <span class="token punctuation">{</span>options<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>            <span class="token operator">&lt;</span>option key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span> value<span class="token operator">=</span><span class="token punctuation">{</span>f<span class="token punctuation">}</span><span class="token operator">></span><br>              <span class="token punctuation">{</span>f<span class="token punctuation">}</span><br>            <span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span><br>          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><br>        <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> sel <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>form<br>      onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"form"</span><span class="token punctuation">,</span> sel<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">}</span><br>    <span class="token operator">></span><br>      <span class="token operator">&lt;</span>Select<br>        ref<span class="token operator">=</span><span class="token punctuation">{</span>sel<span class="token punctuation">}</span><br>        label<span class="token operator">=</span><span class="token string">"Fruit"</span><br>        options<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">"Apple"</span><span class="token punctuation">,</span> <span class="token string">"Orange"</span><span class="token punctuation">,</span> <span class="token string">"Banana"</span><span class="token punctuation">,</span> <span class="token string">"Pear"</span><span class="token punctuation">]</span><span class="token punctuation">}</span><br>      <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>Select ref<span class="token operator">=</span><span class="token punctuation">{</span>sel<span class="token punctuation">}</span> label<span class="token operator">=</span><span class="token string">"Veg"</span> options<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">"Carrots"</span><span class="token punctuation">,</span> <span class="token string">"Peas"</span><span class="token punctuation">,</span> <span class="token string">"Brocolli"</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">"submit"</span><span class="token operator">></span>Submit<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"app"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2>7. Multiple pass down, form state, useReducer</h2>
<p>For this round I tried three different strategies. First storing state for each field separately. This produced the rendering result I wanted but wuuld be prohibitive in a production situation. The second was storing form state in a single state hook which was really just a reversion to the case that provoked this little study. Last I tried the <code>useReducer</code> hook. Still not a solution for rendering but I've other complexity issues this hook could address nicely so I'm glad I had a chance to use it.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span> fruit<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span> veg<span class="token operator">:</span> <span class="token string">""</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">case</span> <span class="token string">"fruit"</span><span class="token operator">:</span><br>      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> fruit<span class="token operator">:</span> action<span class="token punctuation">.</span>data <span class="token punctuation">}</span><span class="token punctuation">;</span><br>    <span class="token keyword">case</span> <span class="token string">"veg"</span><span class="token operator">:</span><br>      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> veg<span class="token operator">:</span> action<span class="token punctuation">.</span>data <span class="token punctuation">}</span><span class="token punctuation">;</span><br>    <span class="token keyword">default</span><span class="token operator">:</span><br>      <span class="token keyword">return</span> state<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">const</span> <span class="token function-variable function">Select</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> label<span class="token punctuation">,</span> options<span class="token punctuation">,</span> value<span class="token punctuation">,</span> setValue <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>label<span class="token operator">></span><br>      <span class="token punctuation">{</span>label<span class="token punctuation">}</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><br>      <span class="token operator">&lt;</span>select value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setValue</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span><br>        <span class="token punctuation">{</span>options<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>          <span class="token operator">&lt;</span>option key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span> value<span class="token operator">=</span><span class="token punctuation">{</span>f<span class="token punctuation">}</span><span class="token operator">></span><br>            <span class="token punctuation">{</span>f<span class="token punctuation">}</span><br>          <span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span><br>        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token comment">//   const [selectedFruit, setSelectedFruit] = useState("");</span><br>  <span class="token comment">//   const [selectedVeg, setSelectedVeg] = useState("");</span><br>  <span class="token comment">//   const [form, setForm] = useState({ fruit: '', veg: ''});</span><br>  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"App"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>form<br>      onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"form"</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>target<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span> e<span class="token punctuation">.</span>target<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">}</span><br>    <span class="token operator">></span><br>      <span class="token operator">&lt;</span>Select<br>        label<span class="token operator">=</span><span class="token string">"Fruit"</span><br>        options<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">"Apple"</span><span class="token punctuation">,</span> <span class="token string">"Orange"</span><span class="token punctuation">,</span> <span class="token string">"Banana"</span><span class="token punctuation">,</span> <span class="token string">"Pear"</span><span class="token punctuation">]</span><span class="token punctuation">}</span><br>        value<span class="token operator">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>fruit<span class="token punctuation">}</span><br>        setValue<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"fruit"</span><span class="token punctuation">,</span> data<span class="token operator">:</span> s <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><br>      <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>Select<br>        label<span class="token operator">=</span><span class="token string">"Veg"</span><br>        options<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">"Carrots"</span><span class="token punctuation">,</span> <span class="token string">"Peas"</span><span class="token punctuation">,</span> <span class="token string">"Brocolli"</span><span class="token punctuation">]</span><span class="token punctuation">}</span><br>        value<span class="token operator">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>veg<span class="token punctuation">}</span><br>        setValue<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"veg"</span><span class="token punctuation">,</span> data<span class="token operator">:</span> s <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><br>      <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">"submit"</span><span class="token operator">></span>Submit<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"app"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2>8. React.memo</h2>
<p>I really liked this solution too though this is probably a naive comparision. I'd probably want to confirm that the values list had not changed as well and I could see there being a diminishing return if I was attempting to compare every value in two lists on every render. Perhaps camparing length and a small subset of the options would be sufficient.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> Select <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span><br>  <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> label<span class="token punctuation">,</span> options<span class="token punctuation">,</span> value<span class="token punctuation">,</span> setValue <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>      <span class="token operator">&lt;</span>label<span class="token operator">></span><br>        <span class="token punctuation">{</span>label<span class="token punctuation">}</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><br>        <span class="token operator">&lt;</span>select<br>          value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><br>          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setValue</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span><br>        <span class="token operator">></span><br>          <span class="token punctuation">{</span>options<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>            <span class="token operator">&lt;</span>option key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span> value<span class="token operator">=</span><span class="token punctuation">{</span>f<span class="token punctuation">}</span><span class="token operator">></span><br>              <span class="token punctuation">{</span>f<span class="token punctuation">}</span><br>            <span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span><br>          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><br>        <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> nextProps</span><span class="token punctuation">)</span> <span class="token operator">=></span> prevProps<span class="token punctuation">.</span>value <span class="token operator">===</span> nextProps<span class="token punctuation">.</span>value<br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span> fruit<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span> veg<span class="token operator">:</span> <span class="token string">""</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">case</span> <span class="token string">"fruit"</span><span class="token operator">:</span><br>      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> fruit<span class="token operator">:</span> action<span class="token punctuation">.</span>data <span class="token punctuation">}</span><span class="token punctuation">;</span><br>    <span class="token keyword">case</span> <span class="token string">"veg"</span><span class="token operator">:</span><br>      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> veg<span class="token operator">:</span> action<span class="token punctuation">.</span>data <span class="token punctuation">}</span><span class="token punctuation">;</span><br>    <span class="token keyword">default</span><span class="token operator">:</span><br>      <span class="token keyword">return</span> state<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>form<br>      onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"form"</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>target<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span> e<span class="token punctuation">.</span>target<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">}</span><br>    <span class="token operator">></span><br>      <span class="token operator">&lt;</span>Select<br>        label<span class="token operator">=</span><span class="token string">"Fruit"</span><br>        options<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">"Apple"</span><span class="token punctuation">,</span> <span class="token string">"Orange"</span><span class="token punctuation">,</span> <span class="token string">"Banana"</span><span class="token punctuation">,</span> <span class="token string">"Pear"</span><span class="token punctuation">]</span><span class="token punctuation">}</span><br>        value<span class="token operator">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>fruit<span class="token punctuation">}</span><br>        setValue<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"fruit"</span><span class="token punctuation">,</span> data<span class="token operator">:</span> s <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><br>      <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>Select<br>        label<span class="token operator">=</span><span class="token string">"Veg"</span><br>        options<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">"Carrots"</span><span class="token punctuation">,</span> <span class="token string">"Peas"</span><span class="token punctuation">,</span> <span class="token string">"Brocolli"</span><span class="token punctuation">]</span><span class="token punctuation">}</span><br>        value<span class="token operator">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>veg<span class="token punctuation">}</span><br>        setValue<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"veg"</span><span class="token punctuation">,</span> data<span class="token operator">:</span> s <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><br>      <span class="token operator">/</span><span class="token operator">></span><br>      <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">"submit"</span><span class="token operator">></span>Submit<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"app"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2>Final Thoughts</h2>
<p>Eight passes was about enough for me to decide that I had done my due dilligence. The lessons were basically known from the beginning. Store the form state as close to where it's being used as possible. Keep an eye on what triggers re-renders. Consider a more well formed solution to form data for React.</p>
<p>This brief study really only concerned itself with render but our application is heavy on forms some of which have complex state needs. I've all ready made it a near future priority to explore Formik and XState.</p>

      </div>
      <footer class="post-footer">
        This post was tagged:
        
          
        
          
            
            <a href="/tags/React/" class="post-tag">React</a>
          
        
      </footer>
    </article>

    <footer class="site-footer">
  <a href="https://github.com/jkrayer">GitHub</a>
  <a href="https://www.linkedin.com/in/james-krayer-65808715/">LinkedIn</a>
  <a href="https://leetcode.com/jkrayer/">LeetCode</a>
</footer>

  </body>
</html>
